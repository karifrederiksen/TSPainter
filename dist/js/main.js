import { ColorSelectionArea, SliderDoubleBinding, SliderElement } from "./UI";
import { CanvRenderingContext } from "./Engine/Rendering/CanvasRenderingContext";
import { DrawPoint } from "./Engine/Rendering/DrawPoints";
import { Hsva } from "./Engine/Math/Color";
import { RNG } from "./Engine/Math/RNG";
import { Brush } from "./Engine/App/Brush";
import { BlendMode } from "./Engine/Rendering/Consts";
import { InputCapture } from "./Engine/Input/InputCapture";
import { interpolatorGenerator } from "./Engine/Rendering/Interpolation";
import { RenderingCoordinator } from "./Engine/Rendering/RenderingCoordinator";
import { Tools } from "./Tools";
import { getCanvasById } from "./Engine/Misc/Misc";
import { Vec2 } from "./Engine/Math/Vec";
import * as Settings from "./Engine/Global/Settings";
import * as Events from "./Engine/Global/Events";
export const DEFAULT_SETTINGS = {
    CanvasWidth: 1000,
    CanvasHeight: 1000,
    Gamma: 2.2,
    ToolId: 0,
    BrushTextureSize: 1000,
    BrushSize: 120,
    BrushSoftness: 0.7,
    BrushSpacing: 0.05,
    BrushDensity: 0.5,
    BrushHue: 0.8,
    BrushSaturation: 0.9,
    BrushValue: 0.8,
    RenderingMaxDrawPoints: 10000,
    RenderingBlendMode: BlendMode.Normal
};
export const dotsPerFrame = 100;
export const frames = 0;
export function initSettingsValues() {
    for (let i = 0, ilen = Object.keys(DEFAULT_SETTINGS).length; i < ilen; i++) {
        Settings.setValue(i, DEFAULT_SETTINGS[Settings.ID[i]]);
    }
}
let rng;
let canvas;
let renderingContext;
let inputCapture;
let interpGen;
let interpolator;
let dpp = Array();
let renderingCoordinator;
let brush;
export function start() {
    rng = new RNG(1);
    canvas = getCanvasById("paintingArea");
    canvas.width = Settings.getValue(Settings.ID.CanvasWidth);
    canvas.height = Settings.getValue(Settings.ID.CanvasHeight);
    renderingContext = new CanvRenderingContext(canvas);
    inputCapture = new InputCapture(canvas);
    brush = new Brush(renderingContext.renderer);
    interpGen = interpolatorGenerator(brush.getSpacingPx());
    renderingCoordinator = new RenderingCoordinator(_render);
    Settings.subscribe(Settings.ID.BrushSpacing, (n) => {
        interpGen = interpolatorGenerator(brush.getSpacingPx());
    });
    Events.subscribe(Events.ID.PointerMove, _onMouseMove);
    Events.subscribe(Events.ID.PointerDrag, _onMouseDrag);
    Events.subscribe(Events.ID.PointerDown, _onMouseDown);
    Events.subscribe(Events.ID.PointerUp, _onMouseUp);
    Events.subscribe(Events.ID.ButtonToolBrush, () => useTool(Tools.Brush));
    Events.subscribe(Events.ID.ButtonToolEraser, () => useTool(Tools.Eraser));
    Events.subscribe(Events.ID.ButtonToolBlur, () => useTool(Tools.Blur));
    useTool(Settings.getValue(Settings.ID.ToolId));
}
let frameCount = 0;
export function animate() {
    const newPts = generateRandomPoints(rng, dotsPerFrame);
    dpp = dpp.concat(newPts);
    _render();
    if (frameCount < frames) {
        requestAnimationFrame(() => animate());
        frameCount++;
    }
    else {
        renderingContext.layer = renderingContext.layerStack.stack[1];
        dpp = generateRandomPoints(rng, dotsPerFrame);
        _render();
    }
}
function createDrawPoint(data) {
    return new DrawPoint(data.positionData.position, Settings.getValue(Settings.ID.BrushSize), data.positionData.pressure, 0, brush.getColorRgba());
}
const _onMouseMove = (data) => { };
const _onMouseDrag = (data) => {
    const point = createDrawPoint(data);
    const output = interpolator(point);
    dpp = dpp.concat(output);
    if (output.length > 0) {
        interpolator = interpGen(output[output.length - 1]);
    }
    render();
};
const _onMouseDown = (data) => {
    const point = createDrawPoint(data);
    interpolator = interpGen(point);
    dpp = [point];
    render();
};
const _onMouseUp = (data) => {
    render();
};
function render() {
    renderingCoordinator.requestRender();
}
const _render = () => {
    if (dpp.length > 0) {
        renderingContext.renderDrawPoints(dpp, brush.getTexture());
        dpp = [];
    }
};
export function useBrush() {
    Events.broadcast(Events.ID.ButtonToolBrush, null);
}
export function useEraser() {
    Events.broadcast(Events.ID.ButtonToolEraser, null);
}
function generateRandomPoints(rng, n) {
    let arr = [];
    let color;
    let x;
    let y;
    let scale = 1;
    let rotation;
    let size = 100;
    let drawPoint;
    for (let i = 0; i < n; i++) {
        x = rng.next() * 1000;
        y = rng.next() * 1000;
        color = generateColor(rng);
        rotation = rng.next() * Math.PI;
        drawPoint = new DrawPoint(Vec2.create(x, y), size, scale, rotation, color);
        arr.push(drawPoint);
    }
    return arr;
}
let colortest = 0;
function generateColor(rng) {
    const gamma = Settings.getValue(Settings.ID.Gamma);
    let h;
    let s;
    let v;
    let a;
    switch (colortest) {
        case 0:
            h = rng.next();
            s = .8 + .2 * rng.next();
            v = .7 + .3 * rng.next();
            a = .7 + .3 * rng.next();
            break;
        case 1:
            h = (Date.now() % 1000) / 1000;
            s = .7;
            v = 1;
            a = Settings.getValue(Settings.ID.BrushDensity);
            break;
        case 2:
            h = Settings.getValue(Settings.ID.BrushHue);
            s = Settings.getValue(Settings.ID.BrushSaturation);
            v = Settings.getValue(Settings.ID.BrushValue);
            a = Settings.getValue(Settings.ID.BrushDensity);
            break;
        default:
            h = 0;
            s = 0;
            v = 0;
            a = 1;
            break;
    }
    return Hsva.create(h, s, v, a)
        .toRgba()
        .powScalar(gamma);
}
function useTool(tool) {
    switch (tool) {
        case Tools.Eraser:
            renderingContext.blendMode = BlendMode.Erase;
            break;
        case Tools.Brush:
        default:
            renderingContext.blendMode = BlendMode.Normal;
            break;
    }
    Settings.setValue(Settings.ID.ToolId, tool);
}
let brushHueSlider;
let brushSaturationSlider;
let brushValueSlider;
let brushDensitySlider;
let brushSoftnessSlider;
let brushSpacingSlider;
let brushSizeSlider;
function initSliders() {
    let args = {
        min: 0,
        max: 1,
        step: 0.0002,
        value: 0,
        precision: 4
    };
    let hueSliderEl = new SliderElement("hueSlider", "Hue", args);
    let satSliderEl = new SliderElement("saturationSlider", "Saturation", args);
    let valSliderEl = new SliderElement("valueSlider", "Value", args);
    let sofSliderEl = new SliderElement("softnessSlider", "Softness", args);
    args.min = 0.001;
    let denSliderEl = new SliderElement("densitySlider", "Density", args);
    let spaSliderEl = new SliderElement("spacingSlider", "Spacing", args);
    args.min = 1;
    args.max = 512;
    args.step = .1;
    args.precision = 1;
    let sizSliderEl = new SliderElement("sizeSlider", "Size", args);
    brushHueSlider = new SliderDoubleBinding(hueSliderEl, Events.ID.BrushHue, Settings.ID.BrushHue);
    brushSaturationSlider = new SliderDoubleBinding(satSliderEl, Events.ID.BrushSaturation, Settings.ID.BrushSaturation);
    brushValueSlider = new SliderDoubleBinding(valSliderEl, Events.ID.BrushValue, Settings.ID.BrushValue);
    brushDensitySlider = new SliderDoubleBinding(denSliderEl, Events.ID.BrushDensity, Settings.ID.BrushDensity);
    brushSoftnessSlider = new SliderDoubleBinding(sofSliderEl, Events.ID.BrushSoftness, Settings.ID.BrushSoftness);
    brushSpacingSlider = new SliderDoubleBinding(spaSliderEl, Events.ID.BrushSpacing, Settings.ID.BrushSpacing);
    brushSizeSlider = new SliderDoubleBinding(sizSliderEl, Events.ID.BrushSize, Settings.ID.BrushSize);
}
let colorPickerArea;
function initColorPicker() {
    colorPickerArea = new ColorSelectionArea();
}
function main() {
    initSettingsValues();
    start();
    initSliders();
    initColorPicker();
    animate();
}
window.onload = main;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9NYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTixrQkFBa0IsRUFDbEIsbUJBQW1CLEVBRW5CLGFBQWEsRUFDYixNQUFNLE1BQU0sQ0FBQztBQUVkLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUMxRCxPQUFPLEVBQU8sSUFBSSxFQUFRLE1BQU0scUJBQXFCLENBQUE7QUFDckQsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3hDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFdEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzNELE9BQU8sRUFBdUMscUJBQXFCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUM5RyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQztBQUMvRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ2hDLE9BQU8sRUFBRSxhQUFhLEVBQWMsTUFBTSxvQkFBb0IsQ0FBQztBQUMvRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDekMsT0FBTyxLQUFLLFFBQVEsTUFBTSwwQkFBMEIsQ0FBQztBQUNyRCxPQUFPLEtBQUssTUFBTSxNQUFNLHdCQUF3QixDQUFDO0FBR2pELE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFRO0lBR3BDLFdBQVcsRUFBRSxJQUFJO0lBQ2pCLFlBQVksRUFBRSxJQUFJO0lBQ2xCLEtBQUssRUFBRSxHQUFHO0lBR1YsTUFBTSxFQUFFLENBQUM7SUFHVCxnQkFBZ0IsRUFBRSxJQUFJO0lBQ3RCLFNBQVMsRUFBUSxHQUFHO0lBQ3BCLGFBQWEsRUFBSSxHQUFHO0lBQ3BCLFlBQVksRUFBSyxJQUFJO0lBQ3JCLFlBQVksRUFBSyxHQUFHO0lBRXBCLFFBQVEsRUFBUyxHQUFHO0lBQ3BCLGVBQWUsRUFBRSxHQUFHO0lBQ3BCLFVBQVUsRUFBTyxHQUFHO0lBR3BCLHNCQUFzQixFQUFFLEtBQUs7SUFDN0Isa0JBQWtCLEVBQUUsU0FBUyxDQUFDLE1BQU07Q0FDcEMsQ0FBQTtBQUdELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRyxHQUFHLENBQUM7QUFDaEMsTUFBTSxDQUFDLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQztBQUt4QixNQUFNO0lBQ0wsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUM1RSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxDQUFDO0FBQ0YsQ0FBQztBQUdELElBQUksR0FBUSxDQUFDO0FBQ2IsSUFBSSxNQUF5QixDQUFDO0FBQzlCLElBQUksZ0JBQXNDLENBQUM7QUFDM0MsSUFBSSxZQUEwQixDQUFDO0FBQy9CLElBQUksU0FBZ0MsQ0FBQztBQUNyQyxJQUFJLFlBQTBCLENBQUM7QUFDL0IsSUFBSSxHQUFHLEdBQUcsS0FBSyxFQUFhLENBQUM7QUFDN0IsSUFBSSxvQkFBMEMsQ0FBQztBQUMvQyxJQUFJLEtBQVksQ0FBQztBQUVqQixNQUFNO0lBQ0wsR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2hCLE1BQU0sR0FBRyxhQUFhLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDdkMsTUFBTSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDMUQsTUFBTSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDNUQsZ0JBQWdCLEdBQUcsSUFBSSxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNwRCxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFeEMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTdDLFNBQVMsR0FBRyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQztJQUN4RCxvQkFBb0IsR0FBRyxJQUFJLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBR3pELFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFTO1FBQ3RELFNBQVMsR0FBRyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQztJQUN6RCxDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDdEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUN0RCxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3RELE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFFbEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFBRyxNQUFNLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUN6RSxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsTUFBTSxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDMUUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRyxNQUFNLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUV2RSxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDaEQsQ0FBQztBQUVELElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztBQUNuQixNQUFNO0lBQ0wsTUFBTSxNQUFNLEdBQUcsb0JBQW9CLENBQUMsR0FBRyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3ZELEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pCLE9BQU8sRUFBRSxDQUFDO0lBQ1YsRUFBRSxDQUFDLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDekIscUJBQXFCLENBQUMsTUFBTSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZDLFVBQVUsRUFBRSxDQUFDO0lBQ2QsQ0FBQztJQUNELElBQUksQ0FBQyxDQUFDO1FBQ0wsZ0JBQWdCLENBQUMsS0FBSyxHQUFHLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUQsR0FBRyxHQUFHLG9CQUFvQixDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUM5QyxPQUFPLEVBQUUsQ0FBQztJQUNYLENBQUM7QUFDRixDQUFDO0FBRUQseUJBQXlCLElBQWU7SUFDdkMsTUFBTSxDQUFDLElBQUksU0FBUyxDQUNuQixJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFDMUIsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUN4QyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFDMUIsQ0FBQyxFQUNELEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FDcEIsQ0FBQztBQUNILENBQUM7QUFHRCxNQUFNLFlBQVksR0FBRyxDQUFDLElBQWUsT0FBTyxDQUFDLENBQUE7QUFFN0MsTUFBTSxZQUFZLEdBQUcsQ0FBQyxJQUFlO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDekIsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLFlBQVksR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBQ0QsTUFBTSxFQUFFLENBQUM7QUFDVixDQUFDLENBQUE7QUFFRCxNQUFNLFlBQVksR0FBRyxDQUFDLElBQWU7SUFDcEMsTUFBTSxLQUFLLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLFlBQVksR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEMsR0FBRyxHQUFHLENBQUUsS0FBSyxDQUFFLENBQUM7SUFDaEIsTUFBTSxFQUFFLENBQUM7QUFDVixDQUFDLENBQUE7QUFFRCxNQUFNLFVBQVUsR0FBRyxDQUFDLElBQWU7SUFDbEMsTUFBTSxFQUFFLENBQUM7QUFDVixDQUFDLENBQUE7QUFFRDtJQUNDLG9CQUFvQixDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQ3RDLENBQUM7QUFJRCxNQUFNLE9BQU8sR0FBRztJQUNmLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7UUFDM0QsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNWLENBQUM7QUFDRixDQUFDLENBQUE7QUFFRCxNQUFNO0lBQ0wsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNuRCxDQUFDO0FBRUQsTUFBTTtJQUNMLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNwRCxDQUFDO0FBRUQsOEJBQThCLEdBQVEsRUFBRSxDQUFTO0lBQ2hELElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNiLElBQUksS0FBVyxDQUFDO0lBRWhCLElBQUksQ0FBUyxDQUFDO0lBQ2QsSUFBSSxDQUFTLENBQUM7SUFDZCxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDZCxJQUFJLFFBQWdCLENBQUM7SUFDckIsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDO0lBQ2YsSUFBSSxTQUFvQixDQUFDO0lBRXpCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDNUIsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDdEIsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFFdEIsS0FBSyxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUUzQixRQUFRLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7UUFFaEMsU0FBUyxHQUFHLElBQUksU0FBUyxDQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDakIsSUFBSSxFQUNKLEtBQUssRUFDTCxRQUFRLEVBQ1IsS0FBSyxDQUNMLENBQUM7UUFDRixHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFDRCxNQUFNLENBQUMsR0FBRyxDQUFDO0FBQ1osQ0FBQztBQUdELElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQztBQUNsQix1QkFBdUIsR0FBUTtJQUM5QixNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkQsSUFBSSxDQUFTLENBQUM7SUFDZCxJQUFJLENBQVMsQ0FBQztJQUNkLElBQUksQ0FBUyxDQUFDO0lBQ2QsSUFBSSxDQUFTLENBQUM7SUFDZCxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ25CLEtBQUssQ0FBQztZQUNMLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDZixDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDekIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3pCLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUN6QixLQUFLLENBQUM7UUFDUCxLQUFLLENBQUM7WUFDTCxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO1lBQy9CLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDUCxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ04sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNoRCxLQUFLLENBQUM7UUFDUCxLQUFLLENBQUM7WUFDTCxDQUFDLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVDLENBQUMsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDbkQsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM5QyxDQUFDLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ2hELEtBQUssQ0FBQztRQUNQO1lBQ0MsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNOLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDTixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ04sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNOLEtBQUssQ0FBQztJQUVSLENBQUM7SUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDNUIsTUFBTSxFQUFFO1NBQ1IsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3BCLENBQUM7QUFHRCxpQkFBaUIsSUFBVztJQUMzQixNQUFNLENBQUEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2IsS0FBSyxLQUFLLENBQUMsTUFBTTtZQUNoQixnQkFBZ0IsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztZQUM3QyxLQUFLLENBQUM7UUFDUCxLQUFLLEtBQUssQ0FBQyxLQUFLLENBQUM7UUFDakI7WUFDQyxnQkFBZ0IsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQztZQUM5QyxLQUFLLENBQUM7SUFDUixDQUFDO0lBQ0QsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM3QyxDQUFDO0FBWUQsSUFBSSxjQUFxQyxDQUFDO0FBQzFDLElBQUkscUJBQTBDLENBQUM7QUFDL0MsSUFBSSxnQkFBc0MsQ0FBQztBQUMzQyxJQUFJLGtCQUF3QyxDQUFDO0FBQzdDLElBQUksbUJBQXdDLENBQUM7QUFDN0MsSUFBSSxrQkFBd0MsQ0FBQztBQUM3QyxJQUFJLGVBQXFDLENBQUM7QUFFMUM7SUFDQyxJQUFJLElBQUksR0FBNEI7UUFDbkMsR0FBRyxFQUFFLENBQUM7UUFDTixHQUFHLEVBQUUsQ0FBQztRQUNOLElBQUksRUFBRSxNQUFNO1FBQ1osS0FBSyxFQUFFLENBQUM7UUFDUixTQUFTLEVBQUUsQ0FBQztLQUNaLENBQUE7SUFDRCxJQUFJLFdBQVcsR0FBRyxJQUFJLGFBQWEsQ0FBQyxXQUFXLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlELElBQUksV0FBVyxHQUFHLElBQUksYUFBYSxDQUFDLGtCQUFrQixFQUFFLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1RSxJQUFJLFdBQVcsR0FBRyxJQUFJLGFBQWEsQ0FBQyxhQUFhLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2xFLElBQUksV0FBVyxHQUFHLElBQUksYUFBYSxDQUFDLGdCQUFnQixFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN4RSxJQUFJLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQztJQUNqQixJQUFJLFdBQVcsR0FBRyxJQUFJLGFBQWEsQ0FBQyxlQUFlLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3RFLElBQUksV0FBVyxHQUFHLElBQUksYUFBYSxDQUFDLGVBQWUsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEUsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDYixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztJQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQ2YsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDbkIsSUFBSSxXQUFXLEdBQUcsSUFBSSxhQUFhLENBQUMsWUFBWSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoRSxjQUFjLEdBQUcsSUFBSSxtQkFBbUIsQ0FBQyxXQUFXLEVBQ25ELE1BQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUNsQixRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3ZCLHFCQUFxQixHQUFHLElBQUksbUJBQW1CLENBQUMsV0FBVyxFQUMxRCxNQUFNLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFDekIsUUFBUSxDQUFDLEVBQUUsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUM5QixnQkFBZ0IsR0FBRyxJQUFJLG1CQUFtQixDQUFDLFdBQVcsRUFDckQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQ3BCLFFBQVEsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDekIsa0JBQWtCLEdBQUcsSUFBSSxtQkFBbUIsQ0FBQyxXQUFXLEVBQ3ZELE1BQU0sQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUN0QixRQUFRLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzNCLG1CQUFtQixHQUFHLElBQUksbUJBQW1CLENBQUMsV0FBVyxFQUN4RCxNQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFDdkIsUUFBUSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM1QixrQkFBa0IsR0FBRyxJQUFJLG1CQUFtQixDQUFDLFdBQVcsRUFDdkQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQ3RCLFFBQVEsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDM0IsZUFBZSxHQUFHLElBQUksbUJBQW1CLENBQUMsV0FBVyxFQUNwRCxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFDbkIsUUFBUSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBR0QsSUFBSSxlQUFtQyxDQUFDO0FBRXhDO0lBQ0MsZUFBZSxHQUFHLElBQUksa0JBQWtCLEVBQUUsQ0FBQztBQUM1QyxDQUFDO0FBSUQ7SUFDQyxrQkFBa0IsRUFBRSxDQUFDO0lBQ3JCLEtBQUssRUFBRSxDQUFDO0lBQ1IsV0FBVyxFQUFFLENBQUM7SUFDZCxlQUFlLEVBQUUsQ0FBQztJQUNsQixPQUFPLEVBQUUsQ0FBQztBQUNYLENBQUM7QUFJRCxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyJ9